class VoiceCommands{constructor(){if(this.recognition=null,this.isListening=!1,this.statusElement=null,this.toggleButton=null,"webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new e,this.setupRecognition()}else console.error("La reconnaissance vocale n'est pas supportée par ce navigateur")}setupRecognition(){this.recognition.lang="fr-FR",this.recognition.continuous=!0,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.onresult=e=>{const t=e.results.length-1,o=e.results[t][0].transcript.toLowerCase().trim();console.log("Transcription:",o),this.processVoiceCommand(o)},this.recognition.onerror=e=>{console.error("Erreur de reconnaissance vocale:",e.error),this.updateStatus(`Erreur: ${e.error}`,"error"),"no-speech"===e.error&&this.updateStatus("Aucune parole détectée","waiting")},this.recognition.onend=()=>{this.isListening&&this.recognition.start()}}processVoiceCommand(e){let t=e.toLowerCase().replace(/[^a-zàâäéèêëïîôùûüÿæœç\s]/g,"");if(t.includes("recommencer")||t.includes("nouveau jeu"))return localStorage.setItem("voiceCommandActive","true"),void location.reload();let o="";if(1===t.length&&/[a-z]/.test(t))o=t;else if(t.includes("lettre")){const e=t.match(/lettre\s+([a-z])/);e&&(o=e[1])}else{const e={ah:"a",a:"a","bé":"b",b:"b","cé":"c",c:"c","dé":"d",d:"d",euh:"e",e:"e",ef:"f",f:"f","gé":"g",g:"g",ache:"h",h:"h",i:"i",ji:"j",j:"j",ka:"k",k:"k",elle:"l",l:"l",aime:"m",m:"m",aine:"n",n:"n",o:"o","pé":"p",p:"p",ku:"q",q:"q",erre:"r",r:"r",esse:"s",s:"s","té":"t",t:"t",u:"u","vé":"v",v:"v","double vé":"w",w:"w",ixe:"x",x:"x","i grec":"y",y:"y","zède":"z",z:"z"};for(const[i,n]of Object.entries(e))if(t===i||t.includes(i)){o=n;break}}if(o&&/[a-z]/.test(o))if(this.updateStatus(`"${o.toUpperCase()}" reconnue`,"success"),"function"==typeof window.guessLetter)window.guessLetter(o);else{const e=document.querySelector(`.keyboard-button[value="${o}"]`);e&&e.click()}else this.updateStatus("Non reconnue","error")}start(){this.recognition?(this.isListening=!0,this.recognition.start(),this.updateStatus("Écoute active...","listening"),this.toggleButton&&(this.toggleButton.classList.add("active"),this.toggleButton.innerHTML="Arrêter la commande vocale"),localStorage.setItem("voiceCommandActive","true")):alert("La reconnaissance vocale n'est pas disponible sur ce navigateur. Veuillez utiliser Chrome, Edge ou Safari.")}stop(){this.isListening=!1,this.recognition&&this.recognition.stop(),this.updateStatus("","stopped"),this.toggleButton&&(this.toggleButton.classList.remove("active"),this.toggleButton.innerHTML="Activer la commande vocale"),localStorage.removeItem("voiceCommandActive")}toggle(){this.isListening?this.stop():this.start()}updateStatus(e,t="info"){this.statusElement&&(this.statusElement.textContent=e,this.statusElement.className=`voice-status voice-status-${t}`,this.statusElement.style.display=e&&"stopped"!==t?"block":"none")}init(){const e=document.createElement("div");e.className="voice-control-container",this.toggleButton=document.createElement("button"),this.toggleButton.className="voice-toggle-button",this.toggleButton.innerHTML="Activer la commande vocale",this.toggleButton.onclick=()=>this.toggle(),this.statusElement=document.createElement("div"),this.statusElement.className="voice-status",this.statusElement.style.display="none",e.appendChild(this.toggleButton),e.appendChild(this.statusElement);const t=document.querySelector(".keyboard");t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling),"true"===localStorage.getItem("voiceCommandActive")&&(localStorage.removeItem("voiceCommandActive"),setTimeout((()=>{this.start()}),500))}}document.addEventListener("DOMContentLoaded",(()=>{window.voiceCommands=new VoiceCommands,window.voiceCommands.init()}));
//# sourceMappingURL=voice-commands.min.js.map