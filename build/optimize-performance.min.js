class PerformanceOptimizer{constructor(){this.fontLoadingComplete=!1,this.criticalResourcesLoaded=!1,this.layoutShiftPrevention(),this.optimizeFontLoading(),this.prioritizeAboveFold()}layoutShiftPrevention(){document.documentElement.classList.add("fonts-loading");const e=document.getElementById("game");e&&(e.style.minHeight="80vh");const t=document.createElement("style");t.textContent='\n      .fonts-loading body {\n        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;\n        visibility: hidden;\n      }\n      \n      .fonts-loading .header {\n        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", fantasy;\n      }\n      \n      .fonts-loaded body {\n        visibility: visible;\n      }\n    ',document.head.appendChild(t)}optimizeFontLoading(){document.fonts&&document.fonts.ready?document.fonts.ready.then((()=>{this.onFontsLoaded()})).catch((()=>{setTimeout((()=>this.onFontsLoaded()),3e3)})):setTimeout((()=>this.onFontsLoaded()),3e3),this.loadFontsOptimally()}loadFontsOptimally(){["https://fonts.gstatic.com/s/opensans/v34/memvYaGs126MiZpBA-UvWbX2vVnXBbObj2OVZyOOSr4dVJWUgsjZ0B4gaVc.woff2","https://fonts.gstatic.com/s/luckiestguy/v24/_gP_1RrxsjNzfgKVJXOb3rHQzSZKmfQ.woff2"].forEach((e=>{const t=document.createElement("link");t.rel="preload",t.as="font",t.type="font/woff2",t.crossOrigin="anonymous",t.href=e,document.head.appendChild(t)}))}onFontsLoaded(){this.fontLoadingComplete=!0,document.documentElement.classList.remove("fonts-loading"),document.documentElement.classList.add("fonts-loaded");const e=document.createElement("style");e.textContent='\n      body {\n        font-family: "Open Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;\n      }\n      \n      .header {\n        font-family: "Luckiest Guy", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", fantasy;\n      }\n    ',document.head.appendChild(e)}prioritizeAboveFold(){const e=document.querySelectorAll("[data-defer]");if("IntersectionObserver"in window){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(this.loadDeferredElement(e.target),t.unobserve(e.target))}))}),{rootMargin:"50px 0px"});e.forEach((e=>t.observe(e)))}else e.forEach((e=>this.loadDeferredElement(e)))}loadDeferredElement(e){const t=e.dataset.src;t&&(e.src=t,e.removeAttribute("data-src"))}reportPerformanceMetrics(){if("PerformanceObserver"in window){new PerformanceObserver((e=>{const t=e.getEntries(),n=t[t.length-1];console.log("LCP:",n.startTime),"undefined"!=typeof gtag&&gtag("event","web_vitals",{name:"LCP",value:Math.round(n.startTime),event_category:"Performance"})})).observe({entryTypes:["largest-contentful-paint"]});new PerformanceObserver((e=>{let t=0;for(const n of e.getEntries())n.hadRecentInput||(t+=n.value);t>0&&(console.log("CLS:",t),"undefined"!=typeof gtag&&gtag("event","web_vitals",{name:"CLS",value:Math.round(1e3*t),event_category:"Performance"}))})).observe({entryTypes:["layout-shift"]})}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{window.performanceOptimizer=new PerformanceOptimizer})):window.performanceOptimizer=new PerformanceOptimizer,window.addEventListener("load",(()=>{window.performanceOptimizer&&window.performanceOptimizer.reportPerformanceMetrics()}));